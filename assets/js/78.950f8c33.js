(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{918:function(t,e,s){"use strict";s.r(e);var a=s(38),_=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("当面试官问你"),s("code",[t._v("node")]),t._v("的时候，更多引导面试官用"),s("code",[t._v("node")]),t._v("做前端工程化，去引导到"),s("code",[t._v("webpack")]),t._v("、"),s("code",[t._v("npm")]),t._v("、打包工具上面去说说自己的想法，不要引导到自己会后端，后台不是会一点"),s("code",[t._v("node")]),t._v("语法就能写的")])]),t._v(" "),s("h2",{attrs:{id:"_1-package-json版本号规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-package-json版本号规则"}},[t._v("#")]),t._v(" 1 package.json版本号规则")]),t._v(" "),s("p",[s("strong",[t._v("major.minor.patch")])]),t._v(" "),s("ul",[s("li",[t._v("主版本号.次版本号.修补版本号")]),t._v(" "),s("li",[s("code",[t._v("patch")]),t._v("：修复"),s("code",[t._v("bug")]),t._v("，兼容老版本")]),t._v(" "),s("li",[s("code",[t._v("minor")]),t._v("：新增功能，兼容老版本")]),t._v(" "),s("li",[s("code",[t._v("major")]),t._v("：新的架构调整，不兼容老版本")])]),t._v(" "),s("p",[s("strong",[t._v("~和^的区别")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("~")]),t._v("会匹配最近的小版本依赖包，比如"),s("code",[t._v("~1.2.3")]),t._v("会匹配所有"),s("code",[t._v("1.2.x")]),t._v("版本，但是不包括"),s("code",[t._v("1.3.0")])]),t._v(" "),s("li",[s("code",[t._v("^")]),t._v("会匹配最新的大版本依赖包，比如"),s("code",[t._v("^1.2.3")]),t._v("会匹配所有"),s("code",[t._v("1.x.x")]),t._v("的包，包括"),s("code",[t._v("1.3.0")]),t._v("，但是不包括"),s("code",[t._v("2.0.0")])])]),t._v(" "),s("h2",{attrs:{id:"_2-npm-模块安装机制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-npm-模块安装机制"}},[t._v("#")]),t._v(" 2 npm 模块安装机制")]),t._v(" "),s("ul",[s("li",[t._v("发出 "),s("code",[t._v("npm install")]),t._v(" 命令 "),s("code",[t._v("1")]),t._v(" 查询 "),s("code",[t._v("node_modules")]),t._v(" 目录之中是否已经存在指定模块")]),t._v(" "),s("li",[t._v("若存在，不再重新安装")]),t._v(" "),s("li",[t._v("若不存在")]),t._v(" "),s("li",[s("code",[t._v("npm")]),t._v(" 向 "),s("code",[t._v("registry")]),t._v(" 查询模块压缩包的网址")]),t._v(" "),s("li",[t._v("下载压缩包，存放在根目录下的"),s("code",[t._v(".npm")]),t._v(" 目录里")]),t._v(" "),s("li",[t._v("解压压缩包到当前项目的 "),s("code",[t._v("node_modules")]),t._v(" 目录")])]),t._v(" "),s("h2",{attrs:{id:"_3-模块化的差异-amd-cmd-commonjs-esmodule"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-模块化的差异-amd-cmd-commonjs-esmodule"}},[t._v("#")]),t._v(" 3 模块化的差异 AMD CMD COMMONJS ESMODULE")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("AMD")]),t._v("是依赖前置，"),s("code",[t._v("define")]),t._v("写法")]),t._v(" "),s("li",[s("code",[t._v("CMD")]),t._v(" 语法"),s("code",[t._v("require")])]),t._v(" "),s("li",[s("code",[t._v("AMD")]),t._v("和"),s("code",[t._v("CMD")]),t._v("是动态引入，运行时才知道的")]),t._v(" "),s("li",[s("code",[t._v("ESMODULE")]),t._v("是静态引入，好处方便"),s("code",[t._v("wepback")]),t._v("打包依赖图谱分析")]),t._v(" "),s("li",[s("code",[t._v("CommonJs")]),t._v(" 是单个值导出，"),s("code",[t._v("ES6 Module")]),t._v(" 可以导出多个")]),t._v(" "),s("li",[s("code",[t._v("CommonJs")]),t._v(" 是动态语法可以写在判断里，"),s("code",[t._v("ES6 Module")]),t._v(" 静态语法只能写在顶层")]),t._v(" "),s("li",[s("code",[t._v("CommonJs")]),t._v(" 的 "),s("code",[t._v("this")]),t._v(" 是当前模块，"),s("code",[t._v("ES6 Module")]),t._v("的 "),s("code",[t._v("this")]),t._v(" 是 "),s("code",[t._v("undefined")])])]),t._v(" "),s("h2",{attrs:{id:"_4-node-的-event-loop-6个阶段"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-node-的-event-loop-6个阶段"}},[t._v("#")]),t._v(" 4 Node 的 Event Loop: 6个阶段")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("timer")]),t._v(" 阶段: 执行到期的"),s("code",[t._v("setTimeout / setInterval")]),t._v("队列回调")]),t._v(" "),s("li",[s("code",[t._v("I/O")]),t._v(" 阶段: 执行上轮循环残流的"),s("code",[t._v("callback")])]),t._v(" "),s("li",[s("code",[t._v("idle")]),t._v(", "),s("code",[t._v("prepare")])]),t._v(" "),s("li",[s("code",[t._v("poll")]),t._v(": 等待回调\n"),s("ul",[s("li",[s("ol",[s("li",[t._v("执行回调")])])]),t._v(" "),s("li",[s("ol",{attrs:{start:"2"}},[s("li",[t._v("执行定时器")])]),t._v(" "),s("ul",[s("li",[t._v("如有到期的"),s("code",[t._v("setTimeout / setInterval")]),t._v("， 则返回 "),s("code",[t._v("timer")]),t._v(" 阶段")]),t._v(" "),s("li",[t._v("如有"),s("code",[t._v("setImmediate")]),t._v("，则前往 "),s("code",[t._v("check")]),t._v(" 阶段")])])])])]),t._v(" "),s("li",[s("code",[t._v("check")]),t._v(" "),s("ul",[s("li",[t._v("执行"),s("code",[t._v("setImmediate")])])])]),t._v(" "),s("li",[s("code",[t._v("close callbacks")])])]),t._v(" "),s("h2",{attrs:{id:"_5-koa相关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-koa相关"}},[t._v("#")]),t._v(" 5 Koa相关")]),t._v(" "),s("h3",{attrs:{id:"koa洋葱模型怎么实现的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#koa洋葱模型怎么实现的"}},[t._v("#")]),t._v(" koa洋葱模型怎么实现的")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("app.use()")]),t._v(" 把中间件函数存储在"),s("code",[t._v("middleware")]),t._v("数组中，最终会调用"),s("code",[t._v("koa-compose")]),t._v("导出的函数compose返回一个promise，中间函数的第一个参数"),s("code",[t._v("ctx")]),t._v("是包含响应和请求的一个对象，会不断传递给下一个中间件。next是一个函数，返回的是一个"),s("code",[t._v("promise")])])]),t._v(" "),s("h3",{attrs:{id:"如果中间件中的next-方法报错了怎么办"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如果中间件中的next-方法报错了怎么办"}},[t._v("#")]),t._v(" 如果中间件中的next()方法报错了怎么办")]),t._v(" "),s("blockquote",[s("p",[t._v("中间件链错误会由"),s("code",[t._v("ctx.onerror")]),t._v("捕获，该函数中会调用"),s("code",[t._v("this.app.emit('error', err, this)")]),t._v("（因为koa继承自events模块，所以有'emit'和on等方法），可以使用"),s("code",[t._v("app.on('error', (err) => {})")]),t._v("，或者"),s("code",[t._v("app.onerror = (err) => {}")]),t._v("进行捕获。")])]),t._v(" "),s("h3",{attrs:{id:"co的原理是怎样的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#co的原理是怎样的"}},[t._v("#")]),t._v(" co的原理是怎样的")]),t._v(" "),s("blockquote",[s("p",[t._v("co的原理是通过不断调用generator函数的"),s("code",[t._v("next")]),t._v("方法来达到自动执行generator函数的，类似async、await函数自动执行")])]),t._v(" "),s("h2",{attrs:{id:"_6-express、koa实现原理以及对比"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-express、koa实现原理以及对比"}},[t._v("#")]),t._v(" 6 Express、koa实现原理以及对比")]),t._v(" "),s("blockquote",[s("p",[t._v("底层建立在"),s("code",[t._v("node.js")]),t._v("内置的http模块上。http模块生成服务器的原始代码如下")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" http "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" app "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" response")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content-Type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/plain"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello world!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[s("code",[t._v("Express")]),t._v("框架的核心是对http模块的再包装")]),t._v(" "),s("li",[s("code",[t._v("Express")]),t._v("框架等于在http模块之上，加了一个中间层")]),t._v(" "),s("li",[t._v("它最大的特点就是，一个中间件处理完，再传递给下一个中间件")]),t._v(" "),s("li",[t._v("比如自带 "),s("code",[t._v("Router")]),t._v("、路由规则等")]),t._v(" "),s("li",[s("code",[t._v("callback")]),t._v("太多")])]),t._v(" "),s("p",[s("strong",[t._v("koa2特点")])]),t._v(" "),s("ul",[s("li",[t._v("洋葱模型")]),t._v(" "),s("li",[t._v("没有自带路由，由koa-router管理")]),t._v(" "),s("li",[t._v("没有callback")])])])}),[],!1,null,null,null);e.default=_.exports}}]);